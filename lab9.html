<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSM - Página de Relatórios</title>
    <script src="js/main.js"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.22.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <header>
        <h1>Laboratório <span id="csm">9</span></h1>
    </header>

    <section>
            <div id="arealab">
                <p class="titlelab">1. Objetivos</p>
                <p class="textlab">
                    Este laboratório tem os seguintes objetivos:
                    <ul class="textlabul">
                        <li>Tocar notas e gerar músicas simples;</li>
                        <li>Gerar arquivos MIDI;</li>
                        <li>Reproduzir arquivos MIDI;</li>
                        <li>Simular a reprodução em salas com Respostas Impulsivas diversas.</li>
                    </ul>
                </p>

                <p class="titlelab">2. Roteiro</p>
                <p class="textlab">Neste laboratório, foi utilizado o roteiro disponibilizado no próprio arquivo do Jupyter Notebook. O arquivo foi editado para atender à
                    proposta e a versão final pode ser visualizada <a href="https://colab.research.google.com/drive/1pDoibHH4YLXUtLFH8oOw6EVHV86gpkG2">neste link.</a></p>
                <br><br>

                <p class="titlelab">3. Desenvolvimento</p>
                
                <p class="textlab">
                    Inicialmente, foram gerados alguns tons com NoteSequences para criar um arquivo MIDI. O primeiro teste criou uma pequena música conhecida como "Twinkle twinkle", 
                    cujo diagrama pitch do MIDI pode ser visto na imagem abaixo, seguido do player do som gerado.
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab9/bokeh_plot01.png" width="75%" style="max-width: 500px">
                </p>

                <p style="text-align:center" class="textlab">
                    <midi-player src="lab9/twinkle_twinkle.mid" sound-font visualizer="#myVisualizer1"></midi-player>
                    <midi-visualizer type="piano-roll" id="myVisualizer1"></midi-visualizer>
                    <midi-visualizer type="staff" id="myVisualizer1"></midi-visualizer>
                </p>

                <p class="textlab">
                    No segundo teste, foi criada a música "Asa Branca", que inicialmente possuía um pequeno erro de tempo em algumas notas. A versão corrigida pode ser vista a seguir.
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab9/bokeh_plot02.png" width="75%" style="max-width: 500px">
                </p>

                <p style="text-align:center" class="textlab">
                    <midi-player src="lab9/asa_branca_sample_output.mid" sound-font visualizer="#myVisualizer2"></midi-player>
                    <midi-visualizer type="piano-roll" id="myVisualizer2"></midi-visualizer>
                    <midi-visualizer type="staff" id="myVisualizer2"></midi-visualizer>
                </p>

                <p class="textlab">
                    Para fechar os testes iniciais, foi gerado uma pequena sequência mudança de instrumento para bateria.
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab9/bokeh_plot03.png" width="75%" style="max-width: 500px">
                </p>

                <p style="text-align:center" class="textlab">
                    <midi-player src="lab9/drums_sample_output.mid" sound-font visualizer="#myVisualizer3"></midi-player>
                    <midi-visualizer type="piano-roll" id="myVisualizer3"></midi-visualizer>
                    <midi-visualizer type="staff" id="myVisualizer3"></midi-visualizer>
                </p>




                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma02.png" width="75%" style="max-width: 892px">
                </p>
                
                <p class="textlab">
                    Foi executada a conversão para MP3 do áudio original e do áudio escolhido, inicialmente usando o codec "libmp3lame" com o parâmetro "-b:a" para o áudio original e "-q:a" para o 
                    áudio escolhido. Neste primeiro momento, foi usada a taxa de 128kbps. Abaixo podem-se verificar os áudios convertidos bem como seus espectrogramas.
                </p>

                <p style="text-align:center" class="textlab">
                    abba128.mp3: <br>
                    <audio controls>
                        <source src="lab8/abba128k.mp3">
                    </audio>
                </p>
                
                <p style="text-align:center" class="textlab">
                    manaca128.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca128k.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma03.png" width="75%" style="max-width: 892px">
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma04.png" width="75%" style="max-width: 892px">
                </p>

                <p class="textlab">
                    Usando a taxa de 64kbps, foi realizada a mesma conversão citada anteriormente. Os áudios e espectrogramas podem ser vistos abaixo.
                </p>

                <p style="text-align:center" class="textlab">
                    abba64.mp3: <br>
                    <audio controls>
                        <source src="lab8/abba64k.mp3">
                    </audio>
                </p>
                
                <p style="text-align:center" class="textlab">
                    manaca64.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca64k.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma05.png" width="75%" style="max-width: 892px">
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma06.png" width="75%" style="max-width: 892px">
                </p>

                <p class="textlab">
                    Usando a taxa de 32, 16 e 8kbps, foram realizadas as mesmas conversões citadas anteriormente. Desta vez, o foco foi o áudio escolhido pelo grupo. 
                    Os áudios e espectrogramas podem ser vistos abaixo.
                </p>

                <p style="text-align:center" class="textlab">
                    manaca32.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca32k.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    manaca16.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca16k.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    manaca8.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca8k.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma07.png" width="75%" style="max-width: 892px">
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma08.png" width="75%" style="max-width: 892px">
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma09.png" width="75%" style="max-width: 892px">
                </p>

                <p class="textlab">
                    Um teste de conversão de codecs foi realizado convertendo os arquivos de MP3 para OGG. Os áudios obtidos podem ser vistos abaixo. A taxa usada permaneceu em 128kbps.
                </p>

                <p style="text-align:center" class="textlab">
                    abba128.ogg: <br>
                    <audio controls>
                        <source src="lab8/abba128k.ogg">
                    </audio>
                </p>
                
                <p style="text-align:center" class="textlab">
                    manaca128.ogg: <br>
                    <audio controls>
                        <source src="lab8/manaca128k.ogg">
                    </audio>
                </p>

                <p class="textlab">
                    Um teste de alteração de velocidade foi realizado, gerando um áudio com tempo de duração menor, resultando em uma aparência de velocidade de reprodução multiplicada por 2.
                </p>

                <p style="text-align:center" class="textlab">
                    abba128k_v2.mp3: <br>
                    <audio controls>
                        <source src="lab8/abba128k_v2.mp3">
                    </audio>
                </p>
                
                <p style="text-align:center" class="textlab">
                    manaca128k_v2.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca128k_v2.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma10.png" width="75%" style="max-width: 892px">
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma11.png" width="75%" style="max-width: 892px">
                </p>

                <p class="textlab">
                    Foi feito também um teste de alteração de velocidade resultando em uma aparência de velocidade de reprodução multiplicada por 0.5 no áudio escolhido. O resultado pode ser visto abaixo.
                </p>

           
                <p style="text-align:center" class="textlab">
                    manaca128k_v3.mp3: <br>
                    <audio controls>
                        <source src="lab8/manaca128k_v3.mp3">
                    </audio>
                </p>

                <p style="text-align:center" class="textlab">
                    <img src="lab8/espectrograma12.png" width="75%" style="max-width: 892px">
                </p>


                <p class="titlelab">4. Conclusões</p>
                <p class="textlab">
                    Neste laboratório o objetivo foi analisar sinais de áudio após conversões realizadas com ffmpg, especialmente seu resultado final e espectrograma. Foi muito interessante utilizar estas 
                    ferramentas, mostramdo-se um método muito eficiente de se trabalhar com sinais de áudio. Notou-se que os espectrogramas apresentam discretas alterações quando se diminui a taxa de bits, 
                    o que se evidenciou na diminuião da intensidade de algumas frequências. Os áudios convertidos permaneceram identificados com suas versões originais, mas mostraram-se com aparência de baixa 
                    qualidade. Analisando-se os espectrogramas da alteração de velocidade, notou-se que praticamente não houve alteração, o que significa que mesmo após a conversão os áudios mantiveram as 
                    faixas de frequências utilizadas nos arquivos originais.
                </p>
            
            
            </div>
    </section>

    <section>
        <div id="link">
            <h4><a href="index.html">VOLTAR</a></h4>
        </div>
        <br>
    </section>

    <footer>
        <h5>ESTI019 – Codificação de Sinais Multimídia - Alunos: Heitor Rodrigues e Luiz Bitencourt - Novembro/2021</h5>
    </footer>
</body>
</html>
